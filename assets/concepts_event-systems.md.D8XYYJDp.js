import{_ as a,c as e,o as n,ag as t}from"./chunks/framework.BpVvFBTM.js";const c=JSON.parse('{"title":"Event Systems","description":"","frontmatter":{},"headers":[],"relativePath":"concepts/event-systems.md","filePath":"concepts/event-systems.md"}'),i={name:"concepts/event-systems.md"};function l(h,s,p,o,r,k){return n(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="event-systems" tabindex="-1">Event Systems <a class="header-anchor" href="#event-systems" aria-label="Permalink to &quot;Event Systems&quot;">​</a></h1><p>The DnD UI Toolkit includes a event system that allows components to communicate and reset their state based on in-game events like rests, level-ups, or custom triggers.</p><h2 id="how-events-work" tabindex="-1">How Events Work <a class="header-anchor" href="#how-events-work" aria-label="Permalink to &quot;How Events Work&quot;">​</a></h2><p>Events in the toolkit are <strong>file-scoped</strong>, meaning they only affect components within the same markdown file. This allows you to have separate event systems for different characters, encounters, or scenarios.</p><p>The event system works through two main mechanisms:</p><ol><li><strong>Event Triggers</strong> - Components that dispatch events (like <a href="./../character-sheet/event-buttons.html">Event Buttons</a>)</li><li><strong>Event Listeners</strong> - Components that respond to events (like <a href="./../components/consumables.html">Consumables</a> and <a href="./../character-sheet/healthpoints.html">Health Points</a>)</li></ol><h2 id="event-flow" tabindex="-1">Event Flow <a class="header-anchor" href="#event-flow" aria-label="Permalink to &quot;Event Flow&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A[Event Button Clicked] --&gt; B[Event Dispatched]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B --&gt; C{Components in Same File}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt; D[Component A: reset_on matches?]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt; E[Component B: reset_on matches?]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    C --&gt; F[Component C: reset_on matches?]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    D --&gt; G[Reset Component A]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    E --&gt; H[Skip Component B]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    F --&gt; I[Reset Component C]</span></span></code></pre></div><h2 id="event-types" tabindex="-1">Event Types <a class="header-anchor" href="#event-types" aria-label="Permalink to &quot;Event Types&quot;">​</a></h2><p>You can use any event name that makes sense for your game:</p><h3 id="common-d-d-events" tabindex="-1">Common D&amp;D Events <a class="header-anchor" href="#common-d-d-events" aria-label="Permalink to &quot;Common D&amp;D Events&quot;">​</a></h3><ul><li><code>short-rest</code> - Abilities that recharge on short rests</li><li><code>long-rest</code> - Abilities that recharge on long rests</li><li><code>new-day</code> - Daily abilities and resources</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Events are dynamic and can be anything you want, the important thing is to match the events in both the button and the component you want to reset.</p></div><h2 id="components-that-trigger-events" tabindex="-1">Components That Trigger Events <a class="header-anchor" href="#components-that-trigger-events" aria-label="Permalink to &quot;Components That Trigger Events&quot;">​</a></h2><h3 id="event-buttons" tabindex="-1">Event Buttons <a class="header-anchor" href="#event-buttons" aria-label="Permalink to &quot;Event Buttons&quot;">​</a></h3><p>The only way to trigger events is through <a href="./../character-sheet/event-buttons.html">Event Buttons</a>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`\`\`</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">event-btns</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Short Rest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">short-rest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Long Rest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">long-rest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`\`\`</span></span></code></pre></div><h2 id="components-that-listen-to-events" tabindex="-1">Components That Listen to Events <a class="header-anchor" href="#components-that-listen-to-events" aria-label="Permalink to &quot;Components That Listen to Events&quot;">​</a></h2><p>Any component with a <code>reset_on</code> field supports listening for events.</p><ul><li><a href="./../components/consumables.html">Consumables</a> - Supports partial and complete resets</li><li><a href="./../character-sheet/healthpoints.html">Health Points</a> - Complete resets only</li></ul><h3 id="reset-types" tabindex="-1">Reset Types <a class="header-anchor" href="#reset-types" aria-label="Permalink to &quot;Reset Types&quot;">​</a></h3><p>Components can reset in different ways when they receive an event:</p><p><strong>Complete Reset</strong>: The component returns to its default state (e.g., all consumables unused, health fully restored)</p><p><strong>Partial Reset</strong>: The component restores a specific amount (e.g., restore 1 spell slot on short rest, full reset on long rest)</p><h4 id="example-partial-reset-configuration" tabindex="-1">Example: Partial Reset Configuration <a class="header-anchor" href="#example-partial-reset-configuration" aria-label="Permalink to &quot;Example: Partial Reset Configuration&quot;">​</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\`\`\`</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">consumable</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Warlock Spell Slots&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    state_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">warlock_slots</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    reset_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">short-rest</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Complete reset on short rest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">long-rest</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # Complete reset on long rest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bardic Inspiration&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    state_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bardic_inspiration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    reset_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">short-rest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Restore only 1 use on short rest</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">long-rest</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Complete reset on long rest</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span>## File Scope Behavior</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Events only affect components within the same markdown file. This means:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- Each character sheet can have its own rest system</span></span>
<span class="line"><span>- Encounter pages can have separate event systems</span></span>
<span class="line"><span>- You can have multiple characters in different files without interference</span></span></code></pre></div>`,27)])])}const d=a(i,[["render",l]]);export{c as __pageData,d as default};
