/* Dashboard layout (7x6 explicit grid) */
.markdown-preview-view .dh-dashboard.dh-grid {
    display: grid;
    gap: 8px;
    width: 100%;
    grid-template-columns: repeat(7, 1fr);
    grid-template-rows: repeat(6, minmax(min-content, auto));
}
/* Card placement to match requested layout */
.card-hero        { grid-column: span 2;            grid-row: span 3; }
.card-rest        { grid-column: 3 / span 3;        grid-row: span 3; }
.card-vitals      { grid-column: 6 / span 2;        grid-row: span 3; }
.card-features    { grid-column: 1 / span 5;        grid-row: 4 / span 2; }
.card-consumables { grid-column: 6 / span 2;        grid-row: 4 / span 2; }
.card-domains     { grid-column: 1 / span 7;        grid-row: 6; }

/* Legacy row layout (kept for compatibility) */
.markdown-preview-view .dh-dashboard { 
    display:flex; 
    flex-direction: column; 
    gap: 12px; 
    width: 100%;
}

.markdown-preview-view .dh-dash-row { 
    display:grid; 
    gap: 12px; 
    align-items: stretch; 
    width: 100%;
    grid-auto-rows: minmax(min-content, auto);
}

.markdown-preview-view .dh-dash-row.row1 { 
    /* Art | Badges&Rest | Vitals&Damage */
    grid-template-columns: minmax(280px, 0.9fr) 1fr 1fr; 
}

.markdown-preview-view .dh-dash-row.row2 { 
    grid-template-columns: minmax(280px, 0.9fr) 1fr 1fr;  
}

.markdown-preview-view .dh-dash-row.row3 { 
    grid-template-columns: 1fr; 
}

@media (max-width: 1000px) {
  .markdown-preview-view .dh-dash-row.row1, 
  .markdown-preview-view .dh-dash-row.row2, 
  .markdown-preview-view .dh-dash-row.row3 { grid-template-columns: 1fr; }
}

/* Ensure row2 places cards side-by-side (no spanning) in legacy layout */
.markdown-preview-view .dh-dash-row.row2 > .dh-dash-consumables,
.markdown-preview-view .dh-dash-row.row2 > .dh-dash-features { grid-column: auto !important; }

/* Cards */
.markdown-preview-view .dh-dash-row > .dh-dash-section { min-width: 0; }
.dh-dash-section { 
    background: var(--background-primary); 
    border: 1px solid var(--background-modifier-border); 
    border-radius: 10px; 
    padding: 8px 10px; 
    box-shadow: var(--shadow-s); 
    display:flex; 
    flex-direction:column; 
    gap:8px; 
    position: relative; 
    z-index: 0;
}
.dh-dash-section > * { margin-top: 0; }
.dh-dash-title { margin-bottom: 6px; }

.dh-dash-title { 
    font-weight: 700; 
    font-size: 12px; 
    letter-spacing: .08em; 
    text-transform: uppercase; 
    color: var(--text-muted); 
}

/* Sub-sections */
.dh-dash-vitals .dh-tracker { 
    margin-bottom: 6px; 
}
/* Make dashboard vitals rows look like standalone vitals: remove per-row dashed frame/label */
.dh-dashboard-vitals .dh-tracker { border: none; padding: 0; margin: 0; }
.dh-dashboard-vitals .dh-tracker::before { content: none; }

.dh-abilities-wrap { 
    display:block; 
}

.dh-hero-img { 
    width: 100%; 
    height: auto; 
    aspect-ratio: 16 / 9; 
    object-fit: cover; 
    object-position: center center; 
    border-radius: 8px; 
    display: block;
}
/* When a fixed height is provided from the block (hero_height), override aspect ratio */
.dh-dash-hero[data-fixed-h="1"] .dh-hero-img { aspect-ratio: auto; height: var(--dh-hero-h, 180px); }
/* Fit/position overrides via data attributes */
.dh-dash-hero[data-fit="contain"] .dh-hero-img { object-fit: contain; background: var(--background-secondary); }
.dh-dash-hero[data-pos="top"] .dh-hero-img { object-position: center top; }
.dh-dash-hero[data-pos="center"] .dh-hero-img { object-position: center center; }
.dh-dash-hero[data-pos="bottom"] .dh-hero-img { object-position: center bottom; }

/* Make the portrait image fill the hero grid area while keeping aspect */
.card-hero { display: grid; grid-template-rows: auto 1fr; }
.card-hero > .dh-dash-title { align-self: start; }
.card-hero .dh-hero-img { width: 100%; height: 100%; object-fit: cover; align-self: stretch; justify-self: stretch; }

/* Default grid sizing (edit these to customize) */
.markdown-preview-view .dh-dashboard.dh-grid {
  --dh-grid-cols: 420px 640px 1fr; /* col1, col2, col3 */
  --dh-grid-areas:
    "hero rest vitals"
    "consumables features features"
    "domains domains domains";
}

/* Default per-card minimum heights (tweak as needed) */
.card-hero        { min-height: 220px; }
.card-rest        { min-height: 160px; }
.card-vitals      { min-height: 220px; }
.card-consumables { min-height: 140px; }
 .card-features    { min-height: 260px; }
 .card-domains     { min-height: 220px; }
 
 /* Dashboard-specific features layout: 2x2 grid
    Row1: Ancestry | Class
    Row2: Community | Subclass
 */
 .card-features {
   display: grid;
   grid-template-columns: 1fr 1fr;
   gap: 10px;
   grid-template-areas: "anc cla" "com sub";
 }
 .card-features--full { grid-column: 1 / span 7; grid-row: 4 / span 2; }
 .card-features .dh-features-ancestry  { grid-area: anc; }
 .card-features .dh-features-class     { grid-area: cla; }
 .card-features .dh-features-community { grid-area: com; }
 .card-features .dh-features-subclass  { grid-area: sub; }
 /* Ensure features list stretches to full grid width in dashboard */
 .card-features.dh-features-list { max-width: none; width: 100%; }
